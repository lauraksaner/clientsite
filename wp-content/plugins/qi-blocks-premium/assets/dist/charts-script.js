(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){t.init()}));const t={init:function(){this.holder=document.querySelectorAll(".qi-block-charts"),this.holder.length&&[...this.holder].map((e=>{t.initItem(e)}))},getRealCurrentItem:function(t){return"string"==typeof t&&""!==t&&(t=qiBlocksEditor.qodefGetCurrentBlockElement.get(t)),t},initItem:function(e,a){if(!(e=t.getRealCurrentItem(e)))return;const r="object"!=typeof qiBlocksEditor?qiBlocks:qiBlocksEditor;a&&e.classList.remove("qodef--init"),r.qodefIsInViewport.check(e,(()=>{e.classList.contains("qodef--init")||t.generateChartData(e,a)}))},generateChartData:function(t,e){let a=t.getAttribute("data-type");a="true"===a?"pie":"doughnut";let r=JSON.parse(t.getAttribute("data-values")),o=JSON.parse(t.getAttribute("data-labels")),i=JSON.parse(t.getAttribute("data-background-colors")),n=JSON.parse(t.getAttribute("data-hover-background-colors")),l=JSON.parse(t.getAttribute("data-border-colors")),d=JSON.parse(t.getAttribute("data-hover-border-colors")),s=parseInt(t.getAttribute("data-border-width")),g=parseInt(t.getAttribute("data-hover-border-width")),b="true"===t.getAttribute("data-enable-legend"),c=t.getAttribute("data-legend-position"),u=t.getAttribute("data-legend-alignment"),h=parseInt(t.getAttribute("data-legend-bar-width")),p=parseInt(t.getAttribute("data-legend-bar-height")),f=parseInt(t.getAttribute("data-legend-bar-margin")),A=t.getAttribute("data-legend-label-color"),C=t.getAttribute("data-legend-label-font"),m=parseInt(t.getAttribute("data-legend-label-font-size")),I=parseInt(t.getAttribute("data-legend-label-font-weight")),v=parseInt(t.getAttribute("data-legend-label-line-height")),y=parseFloat(t.getAttribute("data-aspect-ratio"))||1;r.forEach((function(t,e){r[e]=parseInt(t)}));let q=JSON.parse(t.getAttribute("data-pattern-images")),S=!1,k={};k.display=b,b&&(k.labels={},c&&(k.position=c),u&&(k.align=u),h&&(k.labels.boxWidth=h),p&&(k.labels.boxHeight=p),f&&(k.labels.padding=f),A&&(k.labels.color=A),(C||m||I||v)&&(void 0===k.labels&&(k.labels={}),k.labels.font={},C&&(k.labels.font.family=C),m&&(k.labels.font.size=m),I&&(k.labels.font.weight=I),v&&(k.labels.font.lineHeight=v)));let w={type:a,data:{datasets:[{data:r,backgroundColor:i,hoverBackgroundColor:n,borderColor:l,hoverBorderColor:d,borderWidth:s,hoverBorderWidth:g,borderAlign:"center",pattern:q}],labels:o},options:{responsive:!0,aspectRatio:y,animation:{animateScale:!0,animateRotate:!0},plugins:{legend:k,tooltip:{titleFont:{size:13},displayColors:!1,cornerRadius:5,caretSize:6}}}};if(void 0!==q&&""!==q&&q.forEach((function(a,r){if(a){S=!0;let a=new Image;a.src=q[r],a.onload=function(){let o=t.querySelector("canvas"),l=o.getContext("2d").createPattern(a,"repeat");i[r]=l,n[r]=l;let d=Chart.getChart(o);e&&"object"==typeof d&&d.destroy(),new Chart(o,w)}}})),!S){let a=t.querySelector("canvas"),r=Chart.getChart(a);e&&"object"==typeof r&&r.destroy(),new Chart(a,w)}t.classList.add("qodef--init")}}})();