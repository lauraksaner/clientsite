(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){t.init()})),window.addEventListener("resize",(function(){t.init()}));const t={init:function(){this.holder=document.querySelectorAll(".qi-block-before-after"),this.holder.length&&[...this.holder].map((e=>{t.initItem(e)}))},getRealCurrentItem:function(t){return"string"==typeof t&&""!==t&&(t=qiBlocksEditor.qodefGetCurrentBlockElement.get(t)),t},initItem:function(e){if(!(e=t.getRealCurrentItem(e)))return;("object"!=typeof qiBlocksEditor?qiBlocks:qiBlocksEditor).qodefWaitForImages.check(e,(function(){t.dragFunctionality(e)}))},dragFunctionality:function(t){let e=t.querySelector(".qodef-m-image-wrapper"),i=e.querySelector(".qodef-m-image.qodef--before"),n=e.querySelector(".qodef-m-image.qodef--after"),o=parseFloat(e.getAttribute("data-offset"))/100,c=t.classList.contains("qodef--vertical")?"vertical":"horizontal",r=0,s=0,d=0,l=0;if(!i||i.length<1)return;const a=e.querySelector(".qodef-m-handle"),f=a.clientWidth/2,u=function(t){const o=function(t){const e=i.clientWidth,n=i.clientHeight;return{w:e+"px",h:n+"px",cw:t*e+"px",ch:t*n+"px"}}(t);a.style.top="",a.style.left="","vertical"===c?a.style.top=parseInt(o.ch,10)-f+"px":a.style.left=parseInt(o.cw,10)-f+"px",function(t){"vertical"===c?(i.style.clip="rect(0,"+t.w+","+t.ch+",0)",n.style.clip="rect("+t.ch+","+t.w+","+t.h+",0)"):(i.style.clip="rect(0,"+t.cw+","+t.h+",0)",n.style.clip="rect(0,"+t.w+","+t.h+","+t.cw+")"),e.style.height=t.h}(o)},h=function(t,e){return i="vertical"===c?(e-s)/l:(t-r)/d,n=0,o=1,Math.max(n,Math.min(o,i));var i,n,o};a.addEventListener("movestart",(function(n){((n.distX>n.distY&&n.distX<-n.distY||n.distX<n.distY&&n.distX>-n.distY)&&"vertical"!==c||(n.distX<n.distY&&n.distX<-n.distY||n.distX>n.distY&&n.distX>-n.distY)&&"vertical"===c)&&n.preventDefault(),n.enableMove(),t.classList.add("qodef--active");const o=e.getBoundingClientRect();r=o.left,s=o.top+window.scrollY,d=i.clientWidth,l=i.clientHeight})),a.addEventListener("move",(function(e){t.classList.contains("qodef--active")&&(o=h(e.pageX,e.pageY),u(o))})),a.addEventListener("moveend",(function(){t.classList.remove("qodef--active")})),a.addEventListener("touchmove",(function(t){t.preventDefault()})),i.addEventListener("mousedown",(function(t){t.preventDefault()})),n.addEventListener("mousedown",(function(t){t.preventDefault()})),u(o),t.classList.add("qodef--init")}}})();