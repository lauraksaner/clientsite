(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){e.init()}));const e={init:function(){this.holder=document.querySelectorAll(".qi-block-advanced-navigation"),this.holder.length&&[...this.holder].map((t=>{e.initItem(t)}))},getRealCurrentItem:function(e){return"string"==typeof e&&""!==e&&(e=qiBlocksEditor.qodefGetCurrentBlockElement.get(e)),e},getIframe:function(){return document.querySelector('.edit-post-visual-editor__content-area iframe[name="editor-canvas"]')},slideUp:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.boxSizing="border-box",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)},slideDown:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;e.style.removeProperty("display");let o=window.getComputedStyle(e).display;"none"===o&&(o="block"),e.style.display=o;let n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.boxSizing="border-box",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)},getParents:function(e,t){void 0===t&&(t=document);let o=[],n=e.parentNode;for(;n.tagName.toLowerCase()!==t;){let e=n;if(o.push(e),!e.parentNode||void 0===e.parentNode.tagName)break;n=e.parentNode,e.parentNode.tagName.toLowerCase()===t&&o.push(e.parentNode)}return o},getSiblings:function(e,t){let o=[],n=e.parentNode.firstChild;for(;n;)1===n.nodeType&&n!==e&&n.classList.contains(t)&&o.push(n),n=n.nextSibling;return o},initItem:function(t,o){(t=e.getRealCurrentItem(t))&&(t.classList.contains("qodef-layout--standard")&&(e.setDropDownPosition(t),t.classList.contains("qodef-item-style--with-active-floating-underline")&&e.setFloatingLine(t),(e.getIframe()||window.innerWidth<=1024)&&(t.classList.remove("qodef-layout--standard"),t.classList.add("qodef-layout--mobile"),"update-opener"===o&&e.initMobileHeaderOpener(t),(void 0===o||["mount","update"].includes(o))&&(e.initMobileHeaderOpener(t),e.initDropDownMenu(t),e.setMobileMenuSize(t)))),t.classList.contains("qodef-layout--full-screen")&&(e.setFullScreenMenuSize(t),"update-opener"===o&&e.initFullScreenOpener(t),(void 0===o||["mount","update"].includes(o))&&(e.initFullScreenOpener(t),e.initDropDownMenu(t,".qodef-full-screen-menu-item-arrow"))))},setDropDownPosition:function(e){const t=e.querySelectorAll("nav > ul > li.menu-item-has-children");if(t.length){let e=document.body.clientWidth;document.querySelector(".edit-post-visual-editor__content-area")&&(e=document.querySelector(".edit-post-visual-editor__content-area").clientWidth),t.forEach((t=>{const o=t.getBoundingClientRect().left,n=t.querySelector("ul"),i=n.offsetWidth,r=e-o;let l;t.querySelectorAll("li.menu-item-has-children").length&&(l=r-i),n.classList.remove("qodef-drop-down--right"),(r<i||l<i)&&n.classList.add("qodef-drop-down--right")}))}},setMobileMenuSize:function(t){const o=e.getIframe(),n=t.querySelector(".qodef-navigation-menu");if(!o&&n){const o=t.querySelector(".qodef-mobile-menu-opener"),i=o?o.getBoundingClientRect():"";if(o&&i){const t=e.getParents(o,"header");let r=i.top+i.height+3;t&&t.filter((e=>"header"===e.tagName.toLowerCase())).length&&(r=t[t.length-1].getBoundingClientRect().top+t[t.length-1].offsetHeight),n.style.position="fixed",n.style.top=parseInt(r,10)+"px"}}},setFullScreenMenuSize:function(t){const o=e.getIframe(),n=document.querySelector(".interface-interface-skeleton__content");if(!o&&n){const e=n.getBoundingClientRect(),o=t.querySelector(".qodef-m-wrapper");o&&(o.style.width=parseInt(e.width,10)+18+"px",o.style.height=parseInt(e.height,10)+"px",o.style.top=parseInt(e.top,10)+"px",o.style.left=parseInt(e.left,10)+"px")}},initFullScreenOpener:function(t){const o=t.querySelectorAll(".qodef-full-screen-menu-opener");if(o.length){const n=["tap","click"];o.forEach((o=>{n.forEach((n=>{o.addEventListener(n,(function(n){n.preventDefault(),t.classList.contains("qodef--opened")?e.closeFullscreen(t,o):e.openFullscreen(t,o)}))})),document.addEventListener("keyup",(function(n){"Escape"===n.key&&t.classList.contains("qodef--opened")&&e.closeFullscreen(t,o)}))}))}},openFullscreen:function(e,t){const o="object"!=typeof qiBlocksEditor?qiBlocks:qiBlocksEditor;document.body.classList.add("qodef-full-screen-menu--opened"),e.classList.add("qodef--opened"),t.setAttribute("aria-expanded","true"),o.qodefScroll.disable()},closeFullscreen:function(e,t){const o="object"!=typeof qiBlocksEditor?qiBlocks:qiBlocksEditor;document.body.classList.remove("qodef-full-screen-menu--opened"),e.classList.remove("qodef--opened"),t.setAttribute("aria-expanded","false"),o.qodefScroll.enable()},initMobileHeaderOpener:function(t){const o=t.querySelector(".qodef-mobile-menu-opener");if(o){const n=t.querySelector("nav"),i=window.getComputedStyle(n);["tap","click"].forEach((r=>{o.addEventListener(r,(function(r){r.preventDefault(),"none"!==i.display?e.setMobileHeaderDropDownVisibility(n,o,!1):(e.setMobileMenuSize(t),e.setMobileHeaderDropDownVisibility(n,o))}))})),document.addEventListener("keyup",(function(t){"Escape"===t.key&&"none"!==i.display&&e.setMobileHeaderDropDownVisibility(n,o,!1)})),window.addEventListener("scroll",(function(){"none"!==i.display&&e.setMobileHeaderDropDownVisibility(n,o,!1,0)}))}},setMobileHeaderDropDownVisibility:function(t,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300;!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?(e.slideDown(t),o.classList.add("qodef--opened"),o.setAttribute("aria-expanded","true")):(e.slideUp(t,n),o.classList.remove("qodef--opened"),o.setAttribute("aria-expanded","false"))},initDropDownMenu:function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".qodef-mobile-menu-item-arrow";const n=t.classList.contains("qodef-dropdown-trigger--menu-item")?"a":o,i=t.querySelectorAll("nav .menu-item-has-children > "+n);if(i.length){const t=["tap","click"];i.forEach((o=>{t.forEach((t=>{o.addEventListener(t,(function(t){t.preventDefault(),e.initDropDownMenuLogic(o)}))}))}))}},initDropDownMenuLogic:function(t){const o=t.parentNode,n=e.getSiblings(o,"menu-item-has-children");if(o.classList.contains("menu-item-has-children")){const i=o.querySelector("ul.sub-menu");"none"!==window.getComputedStyle(i).display?(e.slideUp(i),o.classList.remove("qodef--opened"),t.setAttribute("aria-expanded","false")):(o.classList.add("qodef--opened"),t.setAttribute("aria-expanded","true"),0===n.length||n.forEach((t=>{const o=t.querySelectorAll("ul.sub-menu");t.classList.remove("qodef--opened"),o.length&&o.forEach((t=>{e.slideUp(t,200);const o=t.querySelectorAll(".menu-item-has-children");o.length&&o.forEach((e=>{e.classList.remove("qodef--opened")}))}))})),e.slideDown(i))}},setFloatingLine:function(t){let o=t.querySelector("nav > ul"),n=o.getBoundingClientRect(),i=t.querySelector(".qodef-advanced-navigation-line"),r=o.querySelectorAll("li.menu-item");e.setFloatingLineSize(o,r,i,n),r.forEach((t=>{const l=t.querySelector("a").getBoundingClientRect();["mouseenter","touchstart"].forEach((e=>{t.addEventListener(e,(function(){i.style.width=l.width+"px",i.style.left=l.left-n.left+"px"}))})),["mouseleave","touchend"].forEach((l=>{t.addEventListener(l,(function(){e.setFloatingLineSize(o,r,i,n)}))}))}))},setFloatingLineSize:function(e,t,o,n){let i;if(e.querySelector(".current-menu-item")){const t=e.querySelector(".current-menu-item a").getBoundingClientRect();i=t.left,o.style.width=t.width+"px"}else{const e=t[0].querySelector("a").getBoundingClientRect();i=e.left,o.style.width=e.width+"px"}o.style.left=i-n.left+"px"}}})();